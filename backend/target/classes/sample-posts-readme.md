# 示例帖子数据导入说明

本文档介绍如何使用`sample-posts.sql`脚本向关系社区应用数据库中导入示例帖子数据。

## 脚本功能介绍

`sample-posts.sql`是一个非破坏性的SQL脚本，用于向数据库中添加预设的示例帖子内容。该脚本有以下特点：

1. **非破坏性**：脚本不会删除已有的数据，只会添加新的内容
2. **自动关联用户**：脚本会自动查找管理员用户或第一个可用用户作为帖子作者
3. **完整数据设置**：不仅添加帖子基本内容，还会设置帖子统计数据和标签
4. **安全检查**：脚本会检查帖子标题是否已存在，避免重复插入

## 脚本执行方法

### 方法一：通过MySQL客户端执行

1. 确保您已安装MySQL客户端工具
2. 打开命令行终端，连接到您的数据库：

```bash
mysql -u 用户名 -p 数据库名
```

3. 在MySQL提示符下，执行以下命令导入脚本：

```sql
source /path/to/sample-posts.sql;
```

或者直接从命令行执行：

```bash
mysql -u 用户名 -p 数据库名 < /path/to/sample-posts.sql
```

### 方法二：通过Java应用执行

如果您希望通过Spring Boot应用加载此脚本，可以在`application.properties`中添加以下配置：

```properties
# 启用SQL脚本初始化
spring.sql.init.mode=always
# 指定要执行的SQL脚本
spring.sql.init.data-locations=classpath:sample-posts.sql
```

注意：使用这种方法时，需要确保`spring.jpa.hibernate.ddl-auto`不是设置为`create`或`create-drop`，以避免数据被重置。推荐使用以下设置：

```properties
spring.jpa.hibernate.ddl-auto=update
```

## 重要说明

1. **用户依赖**：脚本执行前必须确保数据库中已有至少一个用户，否则将无法插入帖子数据
2. **重复数据处理**：脚本通过检查帖子标题避免重复插入，如果同名帖子已存在则会跳过
3. **数据库兼容性**：脚本设计用于MySQL/MariaDB，其他数据库可能需要语法调整
4. **执行权限**：确保执行脚本的数据库用户有足够的插入权限

## 帖子分类说明

脚本中的示例帖子涵盖了以下几个主要分类：

1. **关注板块**：有关建立人际关系网络和有效沟通的内容
2. **推荐板块**：关于家庭关系处理和倾听技巧的内容
3. **热榜板块**：数字时代人际连接和关系修复的话题
4. **故事板块**：关于友情重聚和倾听改变生活的真实故事
5. **情感知识板块**：依恋理论和长期关系维护的专业知识

## 自定义脚本

如果您想添加更多的示例帖子，可以参照脚本中的现有模式，复制相应的代码块并修改以下内容：

1. 设置新的帖子标题(`@post_title`)
2. 编写帖子内容，支持Markdown格式
3. 选择合适的帖子分类(`tab`)
4. 设置相关的帖子标签

### 示例帖子分类建议

对于关系社区应用，可以考虑以下类别的示例帖子：

- 婚姻关系建议
- 亲子关系指导
- 职场关系处理
- 朋友关系维护
- 恋爱关系问题
- 人际冲突解决
- 情感心理分析
- 自我成长与关系

## 故障排除

如果您在执行脚本时遇到问题，请检查：

1. 数据库连接是否正确
2. 用户权限是否足够
3. 数据库中是否已有用户数据
4. 数据库表结构是否与脚本假设一致

如果遇到语法错误，可能需要根据您的具体MySQL版本调整脚本语法。

---

使用本脚本可以快速填充社区应用的初始内容，便于开发和测试。脚本设计为安全且可重复执行，您可以根据需要多次运行它添加更多示例内容。 
